
% Auto-generated by generate_diagrams.py
\begin{tikzpicture}[node distance=1.6cm]
  % Styles
  \tikzset{
    block/.style={draw, rounded corners, thick, align=center, fill=slate800, text=slate100, inner sep=6pt},
    data/.style={draw, rounded corners, thick, align=center, fill=slate700, text=slate100, inner sep=6pt},
    process/.style={draw, rounded corners, thick, align=center, fill=slate700, text=slate100, inner sep=6pt},
    result/.style={draw, rounded corners, thick, align=center, fill=slate800, text=slate100, inner sep=6pt},
    dashedblock/.style={draw=slate700, rounded corners, thick, align=center, dashed, inner sep=6pt},
    line/.style={-Latex, very thick, draw=cyan400},
  }

  % Row 1: Data sources (explicit coordinates to avoid overlap)
  \node[data] (geochem) at (0,0) {Geochemical\\Samples};
  \node[data] (terrain) at (4,0) {Terrain/DEM};
  \node[data] (remote)  at (8,0) {Remote\\Sensing};
  \node[data] (geology) at (12,0) {Geology\\Layers};

  % Row 2
  \node[process] (ingest) at (2,-2.2) {Ingestion \& Preprocessing\\CRS align, resample, clip, clean};
  \node[process] (feat)   at (10,-2.2) {Feature Engineering\\indices, texture, distances};

  % Row 3
  \node[block] (split) at (2,-4.6) {Spatial Train/Test Split\\(Geographic Blocks)};
  \node[block] (cv)    at (10,-4.6) {Spatial Cross-Validation\\(k folds, geographic)};

  % Row 4: Models
  \node[block] (rf)   at (0.5,-7.1) {Random Forest};
  \node[block] (xgb)  at (6.0,-7.1) {XGBoost};
  \node[block] (lgbm) at (11.5,-7.1) {LightGBM};

  % Row 5
  \node[result] (eval)    at (6.0,-9.6) {Evaluation\\Accuracy, F1, ROC-AUC, Precision@k};
  \node[result] (mapping) at (6.0,-12.0) {Probability Mapping\\(Kriging/Interpolation)};
  \node[result] (deploy)  at (6.0,-14.4) {Web/GIS Deployment\\Dashboards, APIs};

  % Edges
  \draw[line] (geochem) -- (ingest);
  \draw[line] (terrain) -- (ingest);
  \draw[line] (remote)  -- (feat);
  \draw[line] (geology) -- (feat);
  \draw[line] (ingest) -- (split);
  \draw[line] (feat)   -- (cv);
  \draw[line] (split)  |- (rf);
  \draw[line] (cv)     -- (xgb);
  \draw[line] (split)  |- (lgbm);
  \draw[line] (rf)  -- (eval);
  \draw[line] (xgb) -- (eval);
  \draw[line] (lgbm) -- (eval);
  \draw[line] (eval) -- (mapping);
  \draw[line] (mapping) -- (deploy);

  % Group boxes
  \node[dashedblock, fit=(geochem) (terrain) (remote) (geology), label={[gray]above:Data Sources}] {};
  \node[dashedblock, fit=(ingest) (feat), label={[gray]above:Preparation}] {};
  \node[dashedblock, fit=(split) (cv), label={[gray]above:Validation Strategy}] {};
  \node[dashedblock, fit=(rf) (xgb) (lgbm), label={[gray]above:Models}] {};
  \node[dashedblock, fit=(eval) (mapping) (deploy), label={[gray]right:Outputs}] {};
\end{tikzpicture}
